#!/bin/sh


if [ -n "${VIM_APP_DIR}" -a -d "${VIM_APP_DIR}" ]; then
    macvimapp="${VIM_APP_DIR}"
fi


if [ ! -z "$macvimapp" ]; then
    if [ -d "${HOME}/Applications/MacVim" ]; then
        macvimapp="${HOME}/Applications/MacVim"
    elif [ -d "/Applications/MacVim" ]; then
        macvimapp="/Applications/MacVim"
    elif [ -d "${HOME}/Applications/MacVim.app" ]; then
        macvimapp="${HOME}/Applications"
    elif [ -d "/Applications/MacVim.app" ]; then
        macvimapp="/Applications"
    else
        if [ ! -z "$macvimapp" ]; then
            for f in $(find "${HOME}/Applications" -type d -iname "MacVim.app")
            do
                macvimapp="$f/.."
            done
        fi
    fi
fi


if [ -n "$macvimapp" ]; then
    open -a "${macvimapp}/MacVim.app" $*
fi
